<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="None">
        
        <link rel="canonical" href="https://chesslablab.github.io/website/">
        <link rel="shortcut icon" href="img/favicon.ico">
        <title>Website</title>
        <link href="css/bootstrap.min.css" rel="stylesheet">
        <link href="css/font-awesome.min.css" rel="stylesheet">
        <link href="css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body class="homepage">
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href=".">Website</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem active">
                                <a href="." class="nav-link">Home</a>
                            </li>
                            <li class="navitem">
                                <a href="installation/" class="nav-link">Installation</a>
                            </li>
                            <li class="navitem">
                                <a href="architecture/" class="nav-link">Architecture</a>
                            </li>
                            <li class="navitem">
                                <a href="blog/" class="nav-link">Blog</a>
                            </li>
                            <li class="navitem">
                                <a href="html-iframes/" class="nav-link">HTML Iframes</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" class="nav-link disabled">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="installation/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#website" class="nav-link">Website</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#available-environments" class="nav-link">Available Environments</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#ssl-certificate-setup" class="nav-link">SSL Certificate Setup</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#customization" class="nav-link">Customization</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="website">Website</h1>
<p><a href="https://www.gnu.org/licenses/gpl-3.0"><img alt="License: MIT" src="https://img.shields.io/badge/License-MIT-blue.svg" /></a>
<a href="https://github.com/dwyl/esta/issues"><img alt="Contributing" src="https://img.shields.io/badge/contributions-welcome-brightgreen.svg?style=flat" /></a></p>
<p>Chess developers and business owners can now run their own open-source chess platform more easily than ever before because the ChesslaBlab website is super-duper simple to install and set up. To give you an idea of its simplicity, the Website's <a href="https://github.com/chesslablab/website/tree/main/assets/js">assets/js</a> folder contains less than 3,000 lines of JavaScript code.</p>
<pre><code class="language-text">cloc assets/js
      80 text files.
      80 unique files.                              
       0 files ignored.

github.com/AlDanial/cloc v 1.90  T=0.05 s (1474.8 files/s, 59028.2 lines/s)
-------------------------------------------------------------------------------
Language                     files          blank        comment           code
-------------------------------------------------------------------------------
JavaScript                      80            311             33           2858
-------------------------------------------------------------------------------
SUM:                            80            311             33           2858
-------------------------------------------------------------------------------
</code></pre>
<p>This is made possible with object-oriented programming (OOP) using <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules#importing_modules_using_import_maps">JavaScript modules</a>. Now you can get rid of libraries and frameworks like React, Vue, Next.js, as well as transpilers, bundlers and so on. The ChesslaBlab website is written using OOP and the DOM.</p>
<h2 id="available-environments">Available Environments</h2>
<h3 id="development">Development</h3>
<p>The following repositories are required to run a complete chess platform in a local development environment:</p>
<ul>
<li><a href="https://github.com/chesslablab/chess-data">Chess Data</a></li>
<li><a href="https://github.com/chesslablab/chess-server">PHP Chess Server</a></li>
<li><a href="https://github.com/chesslablab/website">Website</a></li>
</ul>
<p>Remember to add your PHP Chess Server host name to the <code>assets/env.js</code> file of your website.</p>
<h3 id="decentralized">Decentralized</h3>
<p>With decentralized chess (DeChess) a complete chess platform can be run using one ChesslaBlab repository only:</p>
<ul>
<li><a href="https://github.com/chesslablab/website">Website</a></li>
</ul>
<p>Make sure to add at least a PHP Chess Server host name from the <a href="https://github.com/chesslablab#node-list">ChesslaBlab Node List</a> to the <code>assets/env.js</code> file of your website.</p>
<h2 id="ssl-certificate-setup">SSL Certificate Setup</h2>
<p>Some familiarity with Public Key Infrastructure (PKI) is recommended in order to follow this section.</p>
<h3 id="development-environment">Development Environment</h3>
<p>The first thing you need to understand about setting up a ChesslaBlab website in a local development environment is that you have to create an SSL certificate to secure three different domain names at once.</p>
<ul>
<li><code>chesslablab.org</code></li>
<li><code>www.chesslablab.org</code></li>
<li><code>async.chesslablab.org</code></li>
</ul>
<p>This is because nowadays, major browsers want all traffic to be secure, and as a web developer you want the development environment to mimic production as much as possible.</p>
<p>The first two domain names, <code>chesslablab.org</code> and <code>www.chesslablab.org</code>, will point to the IP of the <a href="https://github.com/chesslablab/website">website</a>. When it comes to websites, it is a common practice to create a domain alias that redirects to the primary domain. Hence the two domain names for the website, one starting with www. The <code>async.chesslablab.org</code> to the IP of the <a href="https://github.com/chesslablab/chess-server">asynchronous chess server</a>.</p>
<h3 id="decentralized-environment">Decentralized Environment</h3>
<p>In a decentralized environment only two domain names need to be secured.</p>
<ul>
<li><code>chesslablab.org</code></li>
<li><code>www.chesslablab.org</code></li>
</ul>
<p>Use custom domain names to configure yours whether you are a chess club, a school, or a FIDE titled player.</p>
<ul>
<li><code>yourchessclub.com</code></li>
<li><code>www.yourchessclub.com</code></li>
</ul>
<h3 id="free-ssl-certificate-with-certbot">Free SSL Certificate with Certbot</h3>
<p>Probably the easiest way to proceed is to purchase a wildcard certificate from a Certificate Authority (CA) however you may want to consider to get your free certificate using <a href="https://certbot.eff.org/">Certbot</a> instead. Be that as it may, keep in mind that before any CA can issue an SSL certificate, a validation process is required to verify that it can be sent to the Certificate Signing Request (CSR) requester.</p>
<p>This is typically achieved through one of the following methods.</p>
<ul>
<li>
<p>Email Validation — a validation email is sent to the certificate requester.</p>
</li>
<li>
<p>HTTP Validation — the certificate requester is asked to upload a validation file at their host.</p>
</li>
<li>
<p>DNS Validation — the certificate requester sets up a CNAME record in the domain's DNS zone for further validation.</p>
</li>
</ul>
<p>I used Certbot to automatically get a free HTTPS certificate. Since the ChesslaBlab website is running on an Ubuntu server, the certificate was validated through DNS as it is described next.</p>
<pre><code class="language-text">sudo certbot certonly --standalone
Saving debug log to /var/log/letsencrypt/letsencrypt.log
Please enter the domain name(s) you would like on your certificate (comma and/or
space separated) (Enter 'c' to cancel): chesslablab.org www.chesslablab.org async.chesslablab.org
Requesting a certificate for chesslablab.org and 2 more domains

Successfully received certificate.
Certificate is saved at: /etc/letsencrypt/live/chesslablab.org-0001/fullchain.pem
Key is saved at:         /etc/letsencrypt/live/chesslablab.org-0001/privkey.pem
This certificate expires on 2024-04-23.
These files will be updated when the certificate renews.
Certbot has set up a scheduled task to automatically renew this certificate in the background.

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
If you like Certbot, please consider supporting our work by:
 * Donating to ISRG / Let's Encrypt:   https://letsencrypt.org/donate
 * Donating to EFF:                    https://eff.org/donate-le
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
</code></pre>
<p>The certbot command generated two files, <code>fullchain.pem</code> and <code>privkey.pem</code>, that then were installed in each of the repos listed above:</p>
<ul>
<li>chesslablab/website</li>
<li>chesslablab/chess-server</li>
</ul>
<p>It is worth saying that for this to function properly, Certbot's documentation recommends to have a working web site that can already be accessed using HTTP on port 80.</p>
<h3 id="self-signed-ssl-certificate-with-openssl">Self-Signed SSL Certificate with OpenSSL</h3>
<p>If issuing a certificate with DNS validation sounds too complicated to you, OpenSSL might be an alternate solution for the development environment. You may want to create a self-signed multi-domain SSL certificate using OpenSSL.</p>
<pre><code class="language-text">openssl genrsa -aes256 -passout pass:foobar -out chesslablab.org.pem 2048
openssl req -passin pass:foobar -new -sha256 -key chesslablab.org.pem -subj &quot;/C=US/ST=CA/O=ChesslaBlab, Inc./CN=chesslablab.org&quot; -reqexts SAN -config &lt;(cat /etc/ssl/openssl.cnf &lt;(printf &quot;[SAN]\nsubjectAltName=DNS:*.mydomain.org&quot;)) -out chesslablab.org.csr
openssl x509 -passin pass:foobar -req -days 365 -in chesslablab.org.csr -signkey chesslablab.org.pem -out chesslablab.org.crt
openssl rsa -passin pass:foobar -in chesslablab.org.pem -out chesslablab.org.key
</code></pre>
<p>The command above will generate four files:</p>
<ul>
<li>chesslablab.org.crt</li>
<li>chesslablab.org.csr</li>
<li>chesslablab.org.key</li>
<li>chesslablab.org.pem</li>
</ul>
<p>Then, <code>chesslablab.org.crt</code> and <code>chesslablab.org.key</code> must be renamed in order to match both the certificate and the key filename created by Certbot. As noted before, it is assumed that Certbot is used to automatically generate the HTTPS certificate so all repositories are configured to read these two files on startup.</p>
<pre><code class="language-text">mv chesslablab.org.crt fullchain.pem
</code></pre>
<pre><code class="language-text">mv chesslablab.org.key privkey.pem
</code></pre>
<p>At this point, it is of vital importance to add the chess server's self-signed certificate as trusted to your browser.</p>
<p><img alt="Figure 1" src="https://raw.githubusercontent.com/chesslablab/website/main/docs/index_01.png" /></p>
<p><strong>Figure 1</strong>. Make the browser trust the chess server's self-signed certificate.</p>
<p>If skipping this step, the web browser won't be able to connect to the chess server. The latter will complain with an SSL handshake error.</p>
<pre><code class="language-text">SSL handshake error: stream_socket_enable_crypto(): SSL operation failed with code 1. OpenSSL Error messages:
error:14094416:SSL routines:ssl3_read_bytes:sslv3 alert certificate unknown
</code></pre>
<p>And the web browser will throw an error accordingly.</p>
<pre><code class="language-text">WebSocket connection to 'wss://async.chesslablab.org:8443/' failed
</code></pre>
<p><img alt="Figure 2" src="https://raw.githubusercontent.com/chesslablab/website/main/docs/index_02.png" /></p>
<p><strong>Figure 2</strong>. WebSocket connection to 'wss://async.chesslablab.org:8443/' failed.</p>
<p>Let's recap!</p>
<p>In order to set up a local development environment, three different domain names need to be secured at once. The SSL certificate is to be installed in each of the following repositories.</p>
<ul>
<li>chesslablab/website</li>
<li>chesslablab/chess-server</li>
</ul>
<p>In a decentralized environment only two domain names need to be secured. The SSL certificate is to be installed in the following repository.</p>
<ul>
<li>chesslablab/website</li>
</ul>
<p><a href="https://certbot.eff.org/">Certbot</a> can be used to automatically get a free HTTPS certificate, however, if this still sounds too complicated, OpenSSL might be an alternate solution for the development environment.</p>
<h2 id="customization">Customization</h2>
<p>The default settings can be customized through the environment variables starting with <code>SET_</code> in the <a href="https://github.com/chesslablab/website/blob/main/.env.example">.env</a> file.</p>
<pre><code class="language-text">SET_SITE_NAME=ChesslaBlab
SET_LOCALE=en
</code></pre>
<p>Change the site name and the locale to configure your website whether you are a chess club, a school, or a FIDE titled player.</p>
<pre><code class="language-text">SET_SITE_NAME=YourChessClub
SET_LOCALE=es
</code></pre>
<p>The supported locales are described in the following table.</p>
<table>
<thead>
<tr>
<th align="left">Locale</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">de</td>
<td align="left">German</td>
</tr>
<tr>
<td align="left">en</td>
<td align="left">English</td>
</tr>
<tr>
<td align="left">es</td>
<td align="left">Spanish</td>
</tr>
<tr>
<td align="left">fr</td>
<td align="left">French</td>
</tr>
<tr>
<td align="left">ru</td>
<td align="left">Russian</td>
</tr>
<tr>
<td align="left">tr</td>
<td align="left">Turkish</td>
</tr>
<tr>
<td align="left">hi</td>
<td align="left">Hindi</td>
</tr>
<tr>
<td align="left">zh_CN</td>
<td align="left">Chinese (Simplified)</td>
</tr>
</tbody>
</table></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="js/jquery-3.6.0.min.js"></script>
        <script src="js/bootstrap.min.js"></script>
        <script>
            var base_url = ".",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="js/base.js"></script>
        <script src="search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>

<!--
MkDocs version : 1.5.3
Build Date UTC : 2024-09-25 22:20:09.747458+00:00
-->
